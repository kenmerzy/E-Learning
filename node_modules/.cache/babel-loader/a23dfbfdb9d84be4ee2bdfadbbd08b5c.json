{"ast":null,"code":"/* eslint-disable no-unused-vars */\nimport { takeLatest, call, put } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { userType } from '../types';\nimport { API_URL } from '../../configs';\nexport default function* userSagas() {\n  yield takeLatest(userType.LOGIN, loginUser);\n  yield takeLatest(userType.REGISTER, registerUser);\n  yield takeLatest(userType.GET_PROFILE, getProfileUser);\n  yield takeLatest(userType.RECHARGE, recharge);\n  yield takeLatest(userType.SEND_MAIL, sendMail);\n}\n\nfunction* sendMail(action) {\n  const {\n    data,\n    callback\n  } = action.payload;\n  const {\n    token,\n    subject,\n    description\n  } = data;\n\n  try {\n    const response = yield call(() => axios.post(`${API_URL}/sendmail/`, {\n      token,\n      subject,\n      description\n    }));\n    callback(response === null || response === void 0 ? void 0 : response.data);\n  } catch (error) {\n    var _error$response;\n\n    callback(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  }\n}\n\nfunction* loginUser(action) {\n  const {\n    data,\n    callback\n  } = action.payload;\n  const {\n    sdt,\n    password\n  } = data;\n\n  try {\n    var _response$data;\n\n    const response = yield call(() => axios.post(`${API_URL}/auth/login`, {\n      sdt,\n      password\n    }));\n    yield put({\n      type: userType.LOGIN_SUCCESS,\n      payload: {\n        data: response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.data\n      }\n    });\n    callback(response === null || response === void 0 ? void 0 : response.data);\n  } catch (error) {\n    var _error$response2;\n\n    callback(error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  }\n}\n\nfunction* getProfileUser(action) {\n  const {\n    data,\n    callback\n  } = action.payload; // const { token } = data\n\n  try {\n    var _response$data2;\n\n    const response = yield call(() => axios.post(`${API_URL}/auth/`, data));\n    console.log('===============================================');\n    console.log('response', response === null || response === void 0 ? void 0 : response.data);\n    console.log('===============================================');\n    yield put({\n      type: userType.GET_PROFILE_SUCCESS,\n      payload: {\n        data: response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.data\n      }\n    });\n    callback(response === null || response === void 0 ? void 0 : response.data);\n  } catch (error) {\n    var _error$response3;\n\n    callback(error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data);\n  }\n}\n\nfunction* recharge(action) {\n  const {\n    data,\n    callback\n  } = action.payload;\n  const {\n    token\n  } = data;\n\n  try {\n    var _response$data3;\n\n    const response = yield call(() => axios.post(`${API_URL}/recharge/charge`, data));\n    yield put({\n      type: userType.GET_PROFILE_SUCCESS,\n      payload: {\n        data: response === null || response === void 0 ? void 0 : (_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : _response$data3.data\n      }\n    });\n    callback(response === null || response === void 0 ? void 0 : response.data);\n  } catch (error) {\n    var _error$response4;\n\n    callback(error === null || error === void 0 ? void 0 : (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data);\n  }\n}\n\nfunction* registerUser(action) {\n  const {\n    data,\n    callback\n  } = action.payload;\n  const {\n    sdt,\n    password,\n    hoVaTen,\n    accountType,\n    email\n  } = data;\n  let response = '';\n\n  try {\n    var _response, _response$data4, _response2;\n\n    if (accountType === 'student') {\n      response = yield call(() => axios.post(`${API_URL}/auth/register/student`, {\n        sdt,\n        password,\n        hoVaTen,\n        email\n      }));\n    } else {\n      response = yield call(() => axios.post(`${API_URL}/auth/register/teacher`, {\n        sdt,\n        password,\n        hoVaTen,\n        email\n      }));\n    }\n\n    yield put({\n      type: userType.LOGIN_SUCCESS,\n      payload: {\n        data: (_response = response) === null || _response === void 0 ? void 0 : (_response$data4 = _response.data) === null || _response$data4 === void 0 ? void 0 : _response$data4.data\n      }\n    });\n    callback((_response2 = response) === null || _response2 === void 0 ? void 0 : _response2.data);\n  } catch (error) {\n    var _error$response5;\n\n    callback(error === null || error === void 0 ? void 0 : (_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.data);\n  }\n}","map":{"version":3,"sources":["/home/ngoclong/ReactJS/ELearningHeroku/e-learning/src/redux/sagas/user.js"],"names":["takeLatest","call","put","axios","userType","API_URL","userSagas","LOGIN","loginUser","REGISTER","registerUser","GET_PROFILE","getProfileUser","RECHARGE","recharge","SEND_MAIL","sendMail","action","data","callback","payload","token","subject","description","response","post","error","sdt","password","type","LOGIN_SUCCESS","console","log","GET_PROFILE_SUCCESS","hoVaTen","accountType","email"],"mappings":"AAAA;AACA,SAASA,UAAT,EAAqBC,IAArB,EAA2BC,GAA3B,QAAsC,oBAAtC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,UAAzB;AACA,SAASC,OAAT,QAAwB,eAAxB;AAEA,eAAe,UAAUC,SAAV,GAAsB;AACnC,QAAMN,UAAU,CAACI,QAAQ,CAACG,KAAV,EAAiBC,SAAjB,CAAhB;AACA,QAAMR,UAAU,CAACI,QAAQ,CAACK,QAAV,EAAoBC,YAApB,CAAhB;AACA,QAAMV,UAAU,CAACI,QAAQ,CAACO,WAAV,EAAuBC,cAAvB,CAAhB;AACA,QAAMZ,UAAU,CAACI,QAAQ,CAACS,QAAV,EAAoBC,QAApB,CAAhB;AACA,QAAMd,UAAU,CAACI,QAAQ,CAACW,SAAV,EAAqBC,QAArB,CAAhB;AACD;;AACD,UAAUA,QAAV,CAAmBC,MAAnB,EAA2B;AACzB,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAqBF,MAAM,CAACG,OAAlC;AACA,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA,OAAT;AAAkBC,IAAAA;AAAlB,MAAkCL,IAAxC;;AAEA,MAAI;AACF,UAAMM,QAAQ,GAAG,MAAMvB,IAAI,CACzB,MAAME,KAAK,CAACsB,IAAN,CAAY,GAAEpB,OAAQ,YAAtB,EAAmC;AACvCgB,MAAAA,KADuC;AAEvCC,MAAAA,OAFuC;AAGvCC,MAAAA;AAHuC,KAAnC,CADmB,CAA3B;AAQAJ,IAAAA,QAAQ,CAACK,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEN,IAAX,CAAR;AACD,GAVD,CAUE,OAAOQ,KAAP,EAAc;AAAA;;AACdP,IAAAA,QAAQ,CAACO,KAAD,aAACA,KAAD,0CAACA,KAAK,CAAEF,QAAR,oDAAC,gBAAiBN,IAAlB,CAAR;AACD;AACF;;AACD,UAAUV,SAAV,CAAoBS,MAApB,EAA4B;AAC1B,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAqBF,MAAM,CAACG,OAAlC;AACA,QAAM;AAAEO,IAAAA,GAAF;AAAOC,IAAAA;AAAP,MAAoBV,IAA1B;;AAEA,MAAI;AAAA;;AACF,UAAMM,QAAQ,GAAG,MAAMvB,IAAI,CACzB,MAAME,KAAK,CAACsB,IAAN,CAAY,GAAEpB,OAAQ,aAAtB,EAAoC;AACxCsB,MAAAA,GADwC;AAExCC,MAAAA;AAFwC,KAApC,CADmB,CAA3B;AAMA,UAAM1B,GAAG,CAAC;AACR2B,MAAAA,IAAI,EAAEzB,QAAQ,CAAC0B,aADP;AAERV,MAAAA,OAAO,EAAE;AAAEF,QAAAA,IAAI,EAAEM,QAAF,aAAEA,QAAF,yCAAEA,QAAQ,CAAEN,IAAZ,mDAAE,eAAgBA;AAAxB;AAFD,KAAD,CAAT;AAIAC,IAAAA,QAAQ,CAACK,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEN,IAAX,CAAR;AACD,GAZD,CAYE,OAAOQ,KAAP,EAAc;AAAA;;AACdP,IAAAA,QAAQ,CAACO,KAAD,aAACA,KAAD,2CAACA,KAAK,CAAEF,QAAR,qDAAC,iBAAiBN,IAAlB,CAAR;AACD;AACF;;AACD,UAAUN,cAAV,CAAyBK,MAAzB,EAAiC;AAC/B,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAqBF,MAAM,CAACG,OAAlC,CAD+B,CAE/B;;AAEA,MAAI;AAAA;;AACF,UAAMI,QAAQ,GAAG,MAAMvB,IAAI,CACzB,MAAME,KAAK,CAACsB,IAAN,CAAY,GAAEpB,OAAQ,QAAtB,EAA+Ba,IAA/B,CADmB,CAA3B;AAGAa,IAAAA,OAAO,CAACC,GAAR,CAAY,iDAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBR,QAAxB,aAAwBA,QAAxB,uBAAwBA,QAAQ,CAAEN,IAAlC;AACAa,IAAAA,OAAO,CAACC,GAAR,CAAY,iDAAZ;AACA,UAAM9B,GAAG,CAAC;AACR2B,MAAAA,IAAI,EAAEzB,QAAQ,CAAC6B,mBADP;AAERb,MAAAA,OAAO,EAAE;AAAEF,QAAAA,IAAI,EAAEM,QAAF,aAAEA,QAAF,0CAAEA,QAAQ,CAAEN,IAAZ,oDAAE,gBAAgBA;AAAxB;AAFD,KAAD,CAAT;AAIAC,IAAAA,QAAQ,CAACK,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEN,IAAX,CAAR;AACD,GAZD,CAYE,OAAOQ,KAAP,EAAc;AAAA;;AACdP,IAAAA,QAAQ,CAACO,KAAD,aAACA,KAAD,2CAACA,KAAK,CAAEF,QAAR,qDAAC,iBAAiBN,IAAlB,CAAR;AACD;AACF;;AACD,UAAUJ,QAAV,CAAmBG,MAAnB,EAA2B;AACzB,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAqBF,MAAM,CAACG,OAAlC;AACA,QAAM;AACJC,IAAAA;AADI,MAEFH,IAFJ;;AAIA,MAAI;AAAA;;AACF,UAAMM,QAAQ,GAAG,MAAMvB,IAAI,CACzB,MAAME,KAAK,CAACsB,IAAN,CAAY,GAAEpB,OAAQ,kBAAtB,EAAyCa,IAAzC,CADmB,CAA3B;AAGA,UAAMhB,GAAG,CAAC;AACR2B,MAAAA,IAAI,EAAEzB,QAAQ,CAAC6B,mBADP;AAERb,MAAAA,OAAO,EAAE;AAAEF,QAAAA,IAAI,EAAEM,QAAF,aAAEA,QAAF,0CAAEA,QAAQ,CAAEN,IAAZ,oDAAE,gBAAgBA;AAAxB;AAFD,KAAD,CAAT;AAIAC,IAAAA,QAAQ,CAACK,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEN,IAAX,CAAR;AACD,GATD,CASE,OAAOQ,KAAP,EAAc;AAAA;;AACdP,IAAAA,QAAQ,CAACO,KAAD,aAACA,KAAD,2CAACA,KAAK,CAAEF,QAAR,qDAAC,iBAAiBN,IAAlB,CAAR;AACD;AACF;;AACD,UAAUR,YAAV,CAAuBO,MAAvB,EAA+B;AAC7B,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAqBF,MAAM,CAACG,OAAlC;AACA,QAAM;AACJO,IAAAA,GADI;AAEJC,IAAAA,QAFI;AAGJM,IAAAA,OAHI;AAIJC,IAAAA,WAJI;AAKJC,IAAAA;AALI,MAMFlB,IANJ;AAOA,MAAIM,QAAQ,GAAG,EAAf;;AACA,MAAI;AAAA;;AACF,QAAIW,WAAW,KAAK,SAApB,EAA+B;AAC7BX,MAAAA,QAAQ,GAAG,MAAMvB,IAAI,CACnB,MAAME,KAAK,CAACsB,IAAN,CAAY,GAAEpB,OAAQ,wBAAtB,EAA+C;AACnDsB,QAAAA,GADmD;AAEnDC,QAAAA,QAFmD;AAGnDM,QAAAA,OAHmD;AAInDE,QAAAA;AAJmD,OAA/C,CADa,CAArB;AAQD,KATD,MASO;AACLZ,MAAAA,QAAQ,GAAG,MAAMvB,IAAI,CACnB,MAAME,KAAK,CAACsB,IAAN,CAAY,GAAEpB,OAAQ,wBAAtB,EAA+C;AACnDsB,QAAAA,GADmD;AAEnDC,QAAAA,QAFmD;AAGnDM,QAAAA,OAHmD;AAInDE,QAAAA;AAJmD,OAA/C,CADa,CAArB;AAQD;;AACD,UAAMlC,GAAG,CAAC;AACR2B,MAAAA,IAAI,EAAEzB,QAAQ,CAAC0B,aADP;AAERV,MAAAA,OAAO,EAAE;AAAEF,QAAAA,IAAI,eAAEM,QAAF,iEAAE,UAAUN,IAAZ,oDAAE,gBAAgBA;AAAxB;AAFD,KAAD,CAAT;AAIAC,IAAAA,QAAQ,eAACK,QAAD,+CAAC,WAAUN,IAAX,CAAR;AACD,GAzBD,CAyBE,OAAOQ,KAAP,EAAc;AAAA;;AACdP,IAAAA,QAAQ,CAACO,KAAD,aAACA,KAAD,2CAACA,KAAK,CAAEF,QAAR,qDAAC,iBAAiBN,IAAlB,CAAR;AACD;AACF","sourcesContent":["/* eslint-disable no-unused-vars */\nimport { takeLatest, call, put } from 'redux-saga/effects'\nimport axios from 'axios'\nimport { userType } from '../types'\nimport { API_URL } from '../../configs'\n\nexport default function* userSagas() {\n  yield takeLatest(userType.LOGIN, loginUser)\n  yield takeLatest(userType.REGISTER, registerUser)\n  yield takeLatest(userType.GET_PROFILE, getProfileUser)\n  yield takeLatest(userType.RECHARGE, recharge)\n  yield takeLatest(userType.SEND_MAIL, sendMail)\n}\nfunction* sendMail(action) {\n  const { data, callback } = action.payload\n  const { token, subject, description } = data\n\n  try {\n    const response = yield call(\n      () => axios.post(`${API_URL}/sendmail/`, {\n        token,\n        subject,\n        description,\n      })\n    )\n\n    callback(response?.data)\n  } catch (error) {\n    callback(error?.response?.data)\n  }\n}\nfunction* loginUser(action) {\n  const { data, callback } = action.payload\n  const { sdt, password } = data\n\n  try {\n    const response = yield call(\n      () => axios.post(`${API_URL}/auth/login`, {\n        sdt,\n        password,\n      })\n    )\n    yield put({\n      type: userType.LOGIN_SUCCESS,\n      payload: { data: response?.data?.data },\n    })\n    callback(response?.data)\n  } catch (error) {\n    callback(error?.response?.data)\n  }\n}\nfunction* getProfileUser(action) {\n  const { data, callback } = action.payload\n  // const { token } = data\n\n  try {\n    const response = yield call(\n      () => axios.post(`${API_URL}/auth/`, data)\n    )\n    console.log('===============================================')\n    console.log('response', response?.data)\n    console.log('===============================================')\n    yield put({\n      type: userType.GET_PROFILE_SUCCESS,\n      payload: { data: response?.data?.data },\n    })\n    callback(response?.data)\n  } catch (error) {\n    callback(error?.response?.data)\n  }\n}\nfunction* recharge(action) {\n  const { data, callback } = action.payload\n  const {\n    token,\n  } = data\n\n  try {\n    const response = yield call(\n      () => axios.post(`${API_URL}/recharge/charge`, data)\n    )\n    yield put({\n      type: userType.GET_PROFILE_SUCCESS,\n      payload: { data: response?.data?.data },\n    })\n    callback(response?.data)\n  } catch (error) {\n    callback(error?.response?.data)\n  }\n}\nfunction* registerUser(action) {\n  const { data, callback } = action.payload\n  const {\n    sdt,\n    password,\n    hoVaTen,\n    accountType,\n    email,\n  } = data\n  let response = ''\n  try {\n    if (accountType === 'student') {\n      response = yield call(\n        () => axios.post(`${API_URL}/auth/register/student`, {\n          sdt,\n          password,\n          hoVaTen,\n          email,\n        })\n      )\n    } else {\n      response = yield call(\n        () => axios.post(`${API_URL}/auth/register/teacher`, {\n          sdt,\n          password,\n          hoVaTen,\n          email,\n        })\n      )\n    }\n    yield put({\n      type: userType.LOGIN_SUCCESS,\n      payload: { data: response?.data?.data },\n    })\n    callback(response?.data)\n  } catch (error) {\n    callback(error?.response?.data)\n  }\n}\n"]},"metadata":{},"sourceType":"module"}